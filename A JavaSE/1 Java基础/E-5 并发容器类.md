[TOC]

### 并发容器类

并发容器类就是 JUC 包下的一些容器类。

#### CopyOnWriteArrayList

见单独的文档。



#### ConcurrentHashMap

见单独的文档。



#### ConcurrentSkipListMap

##### ① 概述

ConcurrentSkipListMap 是基于 **SkipList** 实现的，SkipList 称为**跳表**。



**特点**

- 没有使用锁，所有操作都是**无阻塞**的，所有操作都**可以并行**，包括写，**多线程可以同时写**。
- 与 ConcurrentHashMap 类似，迭代器**不会抛出** ConcurrentModificationException，是**弱一致性**的，迭代可能反映最新修改也可能不反映。
- 实现了 ConcurrentMap 接口，支持一些原子复合操作。
- 与 TreeMap 一样可以**排序**，默认安装键的自然排序，也可以按照自定义比较器进行排序。



##### ② 原理分析

跳表是基于**链表**的，在链表的基础上增加了**多层索引**结构。

![1582800147086](assets/G-7%20%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8%E7%B1%BB/1582800147086.png)

最下面一层是最基本的**单向链表**，这是一个**有序**的链表。但是普通链表不能进行直接定位，所以不能进行二分查找。所以为了**快速查找**，使用了**多层索引**，**高层的索引节点一定同时是底层的索引节点**。每个索引节点有两个指针，一个向右指向统同层的索引节点，另一个向下指向下一层的索引节点或者基本链表节点。

基于上述结构就可以进行**二分查找**了。复杂度是O(logN)。







#### 参考资料

- https://www.cnblogs.com/xrq730/p/5020760.html