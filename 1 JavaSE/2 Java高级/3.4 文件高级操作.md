[TOC]

### 文件高级操作



#### 属性文件

Java属性文件就是配置文件。其中以**键值对**的形式存放信息。注意，每个键值对结尾**没有分号**。

如：jdbc.properties

```properties
driverClass = com.mysql.jdbc.Driver
url = jdbc:myql:///jdbctest
username = root
password = 123456
```

Java程序可以调用属性文件。方式为：

```java
public class JDBCUtils {
	private static final String driverClass;
	private static final String url;
	private static final String username;
	private static final String password;
	
	static {
		// 加载属性文件并解析
		Properties props = new Properties();
		// 使用类加载器获得属性文件的输入流
		InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream("jdbc.properties");
		try {
            // 传入流
			props.load(is);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println("加载is失败");
		}
		driverClass=props.getProperty("driverClass");
		url=props.getProperty("url");
		username=props.getProperty("username");
		password=props.getProperty("password");
	}
}
```

步骤可以总结为：

- 编写属性文件xxx.properties;

- 获取属性文件对象：Properties props = new Properties();

- 使用类加载器获得属性文件输入流。这里的路径，属性文件直接放在了eclipse的src文件夹下，当前类在包下，因为package指向的根目录也在src文件夹下，所以可以直接写文件名。

```java
InputStream is = 当前类.class.getClassLoader().getResourceAsStream("属性文件的路径");  
```

- 属性文件对象加载属性文件：props.load(is);

- 获取属性值 xxxx = props.getProperty("key");

java.uitl.Properties 类的好处：

- 可以自动处理空格，分隔符 = 前后的空格自动忽略。
- 可以自动忽略空行。
- 可以添加注释，# 或者 ！开头的行被忽视。
- 限制是不能直接处理中文。



#### 随机读写文件

Java.io 包提供了 RandomAccessFile 类用于随机文件的创建和访问。使用这个类，可以跳转到文件的任意位置读写数据。程序可以在随机文件中插入数据，而不会破坏该文件的其他数据。此外，程序也可以更新或删除先前存储的数据，而不用重写整个文件。

用于随机读写，更接近于操作系统的 API，在实现以些系统程序时，它比流更为方便高效。

RandomAccessFile类是Object类的直接子类，包含两个主要的构造方法用来创 建RandomAccessFile 的对象，如表 10-11 所示。  

|                     构造方法                      |                             释义                             |
| :-----------------------------------------------: | :----------------------------------------------------------: |
| public RandomAccessFile(String name, String mode) | 指定随机文件流对象所对应的文件名，以 mode 表示对文件的访问模式 |
| public RandomAccessFile (File file, String mode)  | 以 file 指定随机文件流对象所对应的文件名，以 mode 表示访问模式 |

需要注意的是，mode 表示所创建的随机读写文件的操作状态，其取值包括：

- r：表示以只读方式打开文件。
- rw：表示以读写方式打开文件，使用该模式只用一个对象即可同时实现读写操作。

RandowAccessFile 类常用的方法及说明如下。

|           **方法**           |                         **功能描述**                         |
| :--------------------------: | :----------------------------------------------------------: |
|        long length()         |                         返回文件长度                         |
|     void seek(long pos)      |      移动文件位置指示器，pos 指定从文件开头的偏离字节数      |
|     int skipBytes(int n)     |           跳过 n 个字节，返回数为实际跳过的字节数            |
|          int read()          | 从文件中读取一个字节，字节的高 24 位为 0，若遇到文件结尾，返回-1 |
|    final byte readByte()     |                  从文件中读取带符号的字节值                  |
|    final char readChar()     |                从文件中读取一个 Unicode 字符                 |
| final void writeChar(inte c) |                    写入一个字符，两个字节                    |



#### 内存映射文件

- 待补充









